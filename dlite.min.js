function Dlite(a){if(!(this instanceof Dlite))return new Dlite(a);this.text=null;this.ref="#"+a;this.showBg=this.height=this.width=this.align=this.color=this.size=null;this.viewer={};this._initialize()}Dlite.version="1.0.0";Dlite.align={VERTICAL:0,HORIZONTAL:1};Dlite.background={SHOW:2,PARTIAL:1,NONE:0};
Dlite.waveforms={domain:function(a,c){return function(b){var f=0,g,e,d=[];if("[object Array]"!==Object.prototype.toString.call(b))throw Error("waveforms: value must be an array");for(g=b.length;f<g;f+=1)e=Math.round(0+10*b[f]/(c-a))-1,0>e?e=0:9<e&&(e=9),d.push("$"+e);return d}}};
Dlite.characterMatrix={"0":{x:5,y:7,matrix:[1,1,1,1,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,1,1,1,1]},1:{x:5,y:7,matrix:[0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0]},2:{x:5,y:7,matrix:[1,1,1,1,1,0,0,0,0,1,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,1,0,0,0,0,1,1,1,1,1]},3:{x:5,y:7,matrix:[1,1,1,1,1,0,0,0,0,1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1,0,0,0,0,1,1,1,1,1,1]},4:{x:5,y:7,matrix:[1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,1,1,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},5:{x:5,y:7,matrix:[1,
1,1,1,1,1,0,0,0,0,1,0,0,0,0,1,1,1,1,1,0,0,0,0,1,0,0,0,0,1,1,1,1,1,1]},6:{x:5,y:7,matrix:[1,1,1,1,1,1,0,0,0,0,1,0,0,0,0,1,1,1,1,1,1,0,0,0,1,1,0,0,0,1,1,1,1,1,1]},7:{x:5,y:7,matrix:[1,1,1,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},8:{x:5,y:7,matrix:[1,1,1,1,1,1,0,0,0,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,0,0,0,1,1,1,1,1,1]},9:{x:5,y:7,matrix:[1,1,1,1,1,1,0,0,0,1,1,0,0,0,1,1,1,1,1,1,0,0,0,0,1,0,0,0,0,1,1,1,1,1,1]},_s:{x:1,y:7,matrix:[0,0,0,0,0,0,0]},_v:{x:5,y:1,matrix:[0,0,0,0,0]},
":":{x:1,y:7,matrix:[0,0,1,0,1,0,0]},$0:{x:1,y:10,matrix:[0,0,0,0,0,0,0,0,0,1]},$1:{x:1,y:10,matrix:[0,0,0,0,0,0,0,0,1,1]},$2:{x:1,y:10,matrix:[0,0,0,0,0,0,0,1,1,1]},$3:{x:1,y:10,matrix:[0,0,0,0,0,0,1,1,1,1]},$4:{x:1,y:10,matrix:[0,0,0,0,0,1,1,1,1,1]},$5:{x:1,y:10,matrix:[0,0,0,0,1,1,1,1,1,1]},$6:{x:1,y:10,matrix:[0,0,0,1,1,1,1,1,1,1]},$7:{x:1,y:10,matrix:[0,0,1,1,1,1,1,1,1,1]},$8:{x:1,y:10,matrix:[0,1,1,1,1,1,1,1,1,1]},$9:{x:1,y:10,matrix:[1,1,1,1,1,1,1,1,1,1]}};
Dlite.prototype={_initialize:function(){var a=this.viewer,c=null;this._setDefaultConfiguration();a.canvas||(c=this._setupSVGViewer(this.ref),a.canvas=c.c,a.width=c.w,a.height=c.h)},_setDefaultConfiguration:function(){this.setSize(5);this.setColor("#f00");this.setBackgroundColor("#000");this.showBackground(Dlite.background.SHOW);this.setAlignment(Dlite.align.HORIZONTAL)},_setupSVGViewer:function(a){var c=document.querySelector(a),b=window.getComputedStyle(c,null),c=b.getPropertyValue("width"),b=b.getPropertyValue("height");
return{c:d3.select(a).append("svg").attr("width",c).attr("height",b).append("g").attr("transform","translate(0,0)"),w:c,h:b}},_drawSVG:function(a){var c=a.x_size,b=a.container,f=a.align,g=0,e=10,d=this.showBg,i=2*a.radius,j=a.radius,m=a.radius/2,l=0,n=0,k=null===a.position?{x:0,y:0}:a.position,h=null,o="grp"+a.index,h=b.select("#"+o);null===h[0][0]&&(h=b.append("g").attr("id",o).attr("transform","translate("+k.x+","+k.y+")"));h=h.selectAll("circle").data(a.data);h.enter().append("circle").attr("cx",
function(a,b){0===b%c&&(0===l&&f===Dlite.align.HORIZONTAL&&(l=g),g=0);return g+=i+m}).attr("cy",function(a,b){0===b%c&&(e+=i+m);f===Dlite.align.VERTICAL&&(n=e);return e}).attr("stroke",function(b){return d===Dlite.background.SHOW||d===Dlite.background.PARTIAL||1===b?a.color:"none"}).attr("stroke-opacity",function(){return d===Dlite.background.SHOW?"0.2":"0.5"}).attr("fill",function(b){return d===Dlite.background.SHOW||1===b?a.color:"none"}).attr("fill-opacity",function(a){return d===Dlite.background.SHOW&&
1!==a?"0.2":"1.0"}).attr("r",j);h.attr("stroke",function(b){return d===Dlite.background.SHOW||d===Dlite.background.PARTIAL||1===b?a.color:"none"}).attr("stroke-opacity",function(){return d===Dlite.background.SHOW?"0.2":"0.5"}).attr("fill",function(b){return d===Dlite.background.SHOW||1===b?a.color:"none"}).attr("fill-opacity",function(a){return d===Dlite.background.SHOW&&1!==a?"0.2":"1.0"});h.exit().remove();return{x:k.x+l,y:k.y+n}},_getFormattedContent:function(a){var c=Object.prototype.toString,
b=null;if("string"===typeof a)b=a.split("");else if("number"===typeof a){if(b=String(a),null!==b||"undefined"!==typeof b)b=b.split("")}else"[object Array]"===c.call(a)&&(b=a);return b},_renderContent:function(a){var c=null,b=this,f=null,c=this._getFormattedContent(a);null!==c&&this._getArrayMatrix(c,function(a,c,d){f=b._drawSVG({color:b.color,index:d,text:a,x_size:c.x,y_size:c.y,container:b.viewer.canvas,align:b.align,radius:b.size,position:f,data:c.matrix})})},_getMatrix:function(a){return Dlite.characterMatrix[a]},
_addSpace:function(a,c,b,f){for(var g=!1,e=0,d=a.length;e<d;e+=1)if(-1===c.indexOf(a[e])){g=!0;break}g&&f("_s",this._getMatrix("_s"),"s"+b)},_getArrayMatrix:function(a,c){for(var b=0;b<a.length;b+=1)c(a[b],this._getMatrix(a[b]),b),this._addSpace(["$"],a[b],b,c)},setContent:function(a){var c=Object.prototype.toString;if("undefined"!==typeof a||"string"===typeof a||"number"===typeof a||"[object Array]"===c.call(a))this.text=a;else throw Error("setContent: content is invalid");return this},setSize:function(a){if("undefined"!==
typeof a||"number"===typeof a)this.size=a;else throw Error("setSize: size is not a number");return this},setColor:function(a){var c=Object.prototype.toString;if("undefined"!==typeof a||"string"===typeof a||"[object Array]"===c.call(a))this.color=a;else throw Error("setColor: colors is invalid");return this},setAlignment:function(a){if(a===Dlite.align.HORIZONTAL||a===Dlite.align.VERTICAL)this.align=a;else throw Error("setAlignment: Invalid alignment value");return this},setBackgroundColor:function(a){var c=
Object.prototype.toString;if("undefined"!==typeof a&&("string"===typeof a||"[object Array]"===c.call(a)))this.color=a;else throw Error("setBackgroundColor: colors is invalid");return this},showBackground:function(a){if(a!==Dlite.background.NONE&&a!==Dlite.background.PARTIAL&&a!==Dlite.background.SHOW)throw Error("setBackground: state is invalid");this.showBg=a;return this},show:function(){var a=arguments,c=0,b=0,f=null,g=0,e=window,d=null,i=this,j;j=function(a){d=e.setInterval(function(){g<f||null===
f?(a(i),i._renderContent(i.text),null!==f&&(g+=1)):null!==d&&e.clearInterval(d)},b)};0<a.length?("number"===typeof a[0]&&(c=a[0]),"number"===typeof a[1]&&(b=a[1]),"number"===typeof a[2]&&(f=a[2]),"function"===typeof a[3]&&e.setTimeout(function(){j(a[3])},c)):this._renderContent(this.text)}};